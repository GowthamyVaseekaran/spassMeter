<?xml version="1.0" encoding="UTF-8"?>
<project name="SpassMeterIntegration" default="deploy" basedir="." xmlns:jacoco="antlib:org.jacoco.ant"
    xmlns:artifact="antlib:org.apache.maven.artifact.ant">
    <!-- import von globalen Properties Einstellungen -->
    <property file="${user.home}/global-build.properties"/>
    <property file="${user.home}/qualimaster-build.properties"/>
    
    <include file="${user.home}/macros.xml"/>
    
    <import file="build.xml"/>
    
    <!-- Creates a jar file -->
    <target name="deploy" depends="jar">
        <!-- package is already done! -->
        <copy file="${dist.dir}/spass-meter-rt.jar" tofile="${build.jar.dir}/${ant.project.name}.jar"/>
        <!-- Copy created jar to global EASy Plug-ins directory -->
        <copy todir="${qm.bundles.dir}">
            <fileset dir="${build.jar.dir}" includes="**/*.jar"/>
        </copy>
        
        <!-- 
        <artifact:install file="${build.jar.dir}/${ant.project.name}.jar">
            <pom refid="pom"/>
        </artifact:install>-->

        <copy file="poms/spass-meter-annotations.xml" toFile="pom.xml"/>
        <mvnDeploy folderName="${ant.project.name}" jarFolder="${build.jar.dir}" jarFile="${meter.jars}/spass-meter-annotations.jar"/>
        <copy file="poms/spass-meter-ant.xml" toFile="pom.xml"/>
        <mvnDeploy folderName="${ant.project.name}" jarFolder="${build.jar.dir}" jarFile="${meter.jars}/spass-meter-ant.jar"/>
        <copy file="poms/spass-meter-boot.xml" toFile="pom.xml"/>
        <mvnDeploy folderName="${ant.project.name}" jarFolder="${build.jar.dir}" jarFile="${meter.jars}/spass-meter-boot.jar"/>
        <copy file="poms/spass-meter-ia.xml" toFile="pom.xml"/>
        <mvnDeploy folderName="${ant.project.name}" jarFolder="${build.jar.dir}" jarFile="${meter.jars}/spass-meter-ia.jar"/>
        <copy file="poms/spass-meter-rt.xml" toFile="pom.xml"/>
        <mvnDeploy folderName="${ant.project.name}" jarFolder="${build.jar.dir}" jarFile="${meter.jars}/spass-meter-rt.jar"/>
        <copy file="poms/spass-meter-static.xml" toFile="pom.xml"/>
        <mvnDeploy folderName="${ant.project.name}" jarFolder="${build.jar.dir}" jarFile="${meter.jars}/spass-meter-static.jar"/>
        <copy file="poms/spass-meter.xml" toFile="pom.xml"/>
        <mvnDeploy folderName="${ant.project.name}" jarFolder="${build.jar.dir}" jarFile="${meter.jars}/spass-meter.jar"/>
    	<delete file="pom.xml"/>
    </target>
    
</project>
